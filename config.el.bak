(menu-bar-mode 1)

(modify-syntax-entry ?_ "w")

(global-evil-leader-mode)

;; leader x for helm execute
(evil-leader/set-key "x" 'counsel-M-x)

(evil-leader/set-key "rr" 'counsel-recentf)

;; delete trailing whitespace
(evil-leader/set-key "rtw" 'delete-trailing-whitespace)

;; ;;  helm-projectile
;; (evil-leader/set-key "c" 'helm-projectile-ag)
;;
;; ;;  helm-locate
;; (setq helm-locate-fuzzy-match nil
;;       helm-locate-command "mdfind -interpret -name %s %s")
;; (evil-leader/set-key "f" 'helm-locate)

(evil-leader/set-key "g" 'magit-status)

;; map helm mini to leader
;;(evil-leader/set-key "b" 'helm-mini)

;; map dired to leader
(evil-leader/set-key "e" 'dired)

(evil-leader/set-key "pp" 'org-publish-current-project)

;; (evil-leader/set-key "tag" 'projectile-regenerate-tags)

(after! evil-maps
    ;; Ctrl-P
    (define-key evil-normal-state-map "\C-p" nil)
    (bind-key* "C-p" 'projectile-find-file)

    ;; let enter open org mode links
    (define-key evil-motion-state-map (kbd "SPC") nil)
    (define-key evil-motion-state-map (kbd "RET") 'org-open-at-point)
    (define-key evil-motion-state-map (kbd "TAB") nil)
    (setq org-return-follows-links t)
    )

    ;; Backspace to switch to last buffer
    (defun er-switch-to-previous-buffer ()
        "Switch to previously open buffer. Repeated invocations toggle between the two most recently open buffers."
        (interactive)
        (switch-to-buffer (other-buffer (current-buffer) 1)))
    (define-key evil-normal-state-map (kbd "DEL") 'er-switch-to-previous-buffer)



(after! evil-numbers
    ;; can't use standard vim keybindings because it conflicts with emacs
    (define-key evil-normal-state-map (kbd "C-S-a") 'evil-numbers/inc-at-pt)
    (define-key evil-normal-state-map (kbd "C-S-x") 'evil-numbers/dec-at-pt)
)

; enable syntax highlighting for vimrc files
(after! vimrc-mode
     (add-to-list 'auto-mode-alist '("\\.vim\\(rc\\)?\\'" . vimrc-mode))
)

;; (use-package poet-theme :ensure t)

;; these are the defaults (before I changed them)
(setq company-idle-delay 0.2 company-minimum-prefix-length 3)

(after! company
  (setq company-minimum-prefix-length 1)
  (setq company-idle-delay 0.1)
  (setq company-show-numbers t)
)

(set-company-backend! '(vhdl-mode) '(company-tabnine company-yasnippet))

(setq doom-theme 'doom-tomorrow-day)

(require 'org)
;;   (setq org-agenda-inhibit-startup nil)
;;   (setq org-src-fontify-natively t)
;;   (setq org-src-tab-acts-natively t)
;;   (setq org-edit-src-content-indentation 0)
;;   (setq org-fontify-quote-and-verse-blocks t)
;;   (setq org-src-window-setup 'other-window)
;;   (setq org-startup-folded 'f)
;;   (setq org-image-actual-width nil)
;;
;;   (add-hook 'org-mode-hook 'visual-line-mode)
;;
;;   ;; hide markup in org-mode
;;   (setq org-hide-emphasis-markers t)
;;
;;   ;; display inline images at startup
;;   (add-hook 'org-mode-hook 'org-display-inline-images)
;;   (setq org-startup-with-inline-images t)
;;   (org-display-inline-images t t)
;;
;;   ;; turn on flyspell mode by default
;;   (add-hook 'text-mode-hook 'flyspell-mode)
;;   (add-hook 'prog-mode-hook 'flyspell-prog-mode)

;; (add-hook 'org-mode-hook (lambda () (
;;                                      variable-pitch-mode t
;;                 (custom-theme-set-faces
;;                 'user
;;                     '(variable-pitch ((t (:family "Liberation Serif" :height 1.1 :weight light))))
;;                     '(fixed-pitch    ((t (:family "Inconsolata"      :height 0.9 :slant normal :weight normal :width normal)))))
;;                                                          )))
;; (add-hook 'latex-mode-hook (lambda () (variable-pitch-mode t)))


;; (font-lock-add-keywords 'org-mode
;;                         '(("^ *\\([-]\\) "
;; 						                           (0 (prog1 () (compose-region (match-beginning 1) (match-end 1) "â€¢"))))))
